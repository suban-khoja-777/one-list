var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function i(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function p(){return u("")}function m(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function h(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}e.selectedIndex=-1}let b;function $(e){b=e}function k(e){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(e)}const y=[],v=[],x=[],w=[],E=Promise.resolve();let N=!1;function S(e){x.push(e)}let T=!1;const I=new Set;function P(){if(!T){T=!0;do{for(let e=0;e<y.length;e+=1){const t=y[e];$(t),O(t.$$)}for($(null),y.length=0;v.length;)v.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];I.has(t)||(I.add(t),t())}x.length=0}while(y.length);for(;w.length;)w.pop()();N=!1,T=!1,I.clear()}}function O(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const j=new Set;let z;function D(){z={r:0,c:[],p:z}}function A(){z.r||l(z.c),z=z.p}function C(e,t){e&&e.i&&(j.delete(e),e.i(t))}function L(e,t,n,l){if(e&&e.o){if(j.has(e))return;j.add(e),z.c.push((()=>{j.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function H(e){e&&e.c()}function R(e,n,a,r){const{fragment:o,on_mount:i,on_destroy:c,after_update:d}=e.$$;o&&o.m(n,a),r||S((()=>{const n=i.map(t).filter(s);c?c.push(...n):l(n),e.$$.on_mount=[]})),d.forEach(S)}function U(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,t){-1===e.$$.dirty[0]&&(y.push(e),N||(N=!0,E.then(P)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(t,s,a,r,o,c,d,u=[-1]){const f=b;$(t);const p=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||f.$$.root};d&&d(p.root);let m=!1;if(p.ctx=a?a(t,s.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return p.ctx&&o(p.ctx[e],p.ctx[e]=s)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](s),m&&K(t,e)),n})):[],p.update(),m=!0,l(p.before_update),p.fragment=!!r&&r(p.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);p.fragment&&p.fragment.l(e),e.forEach(i)}else p.fragment&&p.fragment.c();s.intro&&C(t.$$.fragment),R(t,s.target,s.anchor,s.customElement),P()}$(f)}class B{$destroy(){U(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const J={apiKey:"AIzaSyCZ2HXCcsbMsIHMxAdqiStOOx7AA5Xhkms",authDomain:"tick-todo-app.firebaseapp.com",projectId:"tick-todo-app",storageBucket:"tick-todo-app.appspot.com",messagingSenderId:"114323470299",appId:"1:114323470299:web:5db79253e64602c2f199fe",measurementId:"G-SHK9S7SRYF"};Object.freeze(J),firebase.initializeApp(J);const W=()=>{firebase.auth().signOut()},q=firebase.auth(),F={},X={SHOW_SPINNER:"SHOW_SPINNER",HIDE_SPINNER:"HIDE_SPINNER",UPDATE_STATUS:"UPDATE_TASK",DELETE_TASK:"DELETE_TASK",OPEN_TASK_DETAIL:"OPEN_TASK_DETAIL"};Object.freeze(X);const Y=(e,t)=>{F[e]||(F[e]=[]);F[e].find((e=>e.callback===t))||F[e].push({callback:t})},G=(e,t)=>{if(F[e]){F[e].forEach((n=>{try{n.callback.call(void 0,t)}catch(l){console.error("@eventName : ",e)&&console.error("@listener : ",n)&&console.error("@payload : ",t)&&console.error("@error : ",l)}}))}};function Z(t){let n,l,a,c;return{c(){n=d("button"),l=u(t[0]),g(n,"class","pointer text-bold svelte-8d8ddr"),g(n,"data-type",t[2])},m(e,i){o(e,n,i),r(n,l),a||(c=m(n,"click",(function(){s(t[1])&&t[1].apply(this,arguments)})),a=!0)},p(e,[s]){t=e,1&s&&h(l,t[0]),4&s&&g(n,"data-type",t[2])},i:e,o:e,d(e){e&&i(n),a=!1,c()}}}function Q(e,t,n){let{label:l}=t,{onClick:s}=t,{type:a}=t;return e.$$set=e=>{"label"in e&&n(0,l=e.label),"onClick"in e&&n(1,s=e.onClick),"type"in e&&n(2,a=e.type)},[l,s,a]}class V extends B{constructor(e){super(),M(this,e,Q,Z,a,{label:0,onClick:1,type:2})}}function ee(e,t,n){const l=e.slice();return l[13]=t[n],l}function te(e){let t,n,l;return{c(){t=d("label"),n=u(e[3]),g(t,"class",l="text-bold "+e[9]+" svelte-1m67u9s"),g(t,"for",e[2])},m(e,l){o(e,t,l),r(t,n)},p(e,s){8&s&&h(n,e[3]),512&s&&l!==(l="text-bold "+e[9]+" svelte-1m67u9s")&&g(t,"class",l),4&s&&g(t,"for",e[2])},d(e){e&&i(t)}}}function ne(e){let t,n,a,r;return{c(){t=d("input"),g(t,"class",n=e[10]+" border-primary border-box "+e[8]+" svelte-1m67u9s"),g(t,"type",e[1]),g(t,"name",e[2]),t.value=e[7],g(t,"placeholder",e[4]),g(t,"data-field",e[11])},m(n,l){o(n,t,l),a||(r=[m(t,"change",(function(){s(e[5])&&e[5].apply(this,arguments)})),m(t,"keyup",(function(){s(e[6])&&e[6].apply(this,arguments)}))],a=!0)},p(l,s){e=l,1280&s&&n!==(n=e[10]+" border-primary border-box "+e[8]+" svelte-1m67u9s")&&g(t,"class",n),2&s&&g(t,"type",e[1]),4&s&&g(t,"name",e[2]),4224&s&&t.value!==e[7]&&(t.value=e[7]),16&s&&g(t,"placeholder",e[4]),2048&s&&g(t,"data-field",e[11])},d(e){e&&i(t),a=!1,l(r)}}}function le(e){let t,n,l,a;return{c(){t=d("textarea"),g(t,"class",n="border-primary text-primary border-box bg-white "+e[8]+" svelte-1m67u9s"),g(t,"rows","10"),g(t,"data-field",e[11]),t.value=e[7]},m(n,r){o(n,t,r),l||(a=m(t,"change",(function(){s(e[5])&&e[5].apply(this,arguments)})),l=!0)},p(l,s){e=l,256&s&&n!==(n="border-primary text-primary border-box bg-white "+e[8]+" svelte-1m67u9s")&&g(t,"class",n),2048&s&&g(t,"data-field",e[11]),4224&s&&(t.value=e[7])},d(e){e&&i(t),l=!1,a()}}}function se(e){let t,n,l,a,r=e[12],u=[];for(let t=0;t<r.length;t+=1)u[t]=ae(ee(e,r,t));return{c(){t=d("select");for(let e=0;e<u.length;e+=1)u[e].c();g(t,"class",n="column flex grow border-bottom-primary text-primary "+e[10]+" border-box text-center pointer border-box justify-center status-column svelte-1m67u9s"),g(t,"name",e[2]),g(t,"data-field",e[11])},m(n,r){o(n,t,r);for(let e=0;e<u.length;e+=1)u[e].m(t,null);_(t,e[7]),l||(a=m(t,"change",(function(){s(e[5])&&e[5].apply(this,arguments)})),l=!0)},p(l,s){if(e=l,4096&s){let n;for(r=e[12],n=0;n<r.length;n+=1){const l=ee(e,r,n);u[n]?u[n].p(l,s):(u[n]=ae(l),u[n].c(),u[n].m(t,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=r.length}1024&s&&n!==(n="column flex grow border-bottom-primary text-primary "+e[10]+" border-box text-center pointer border-box justify-center status-column svelte-1m67u9s")&&g(t,"class",n),4224&s&&_(t,e[7]),4&s&&g(t,"name",e[2]),2048&s&&g(t,"data-field",e[11])},d(e){e&&i(t),c(u,e),l=!1,a()}}}function ae(e){let t,n,l,s=e[13]+"";return{c(){t=d("option"),n=u(s),t.__value=l=e[13],t.value=t.__value,g(t,"class","option bg-white text-primary")},m(e,l){o(e,t,l),r(t,n)},p(e,a){4096&a&&s!==(s=e[13]+"")&&h(n,s),4096&a&&l!==(l=e[13])&&(t.__value=l,t.value=t.__value)},d(e){e&&i(t)}}}function re(t){let n,l,s=t[0]&&te(t);function a(e,t){return"select"===e[1]?se:"text-long"===e[1]?le:ne}let r=a(t),c=r(t);return{c(){s&&s.c(),n=f(),c.c(),l=p()},m(e,t){s&&s.m(e,t),o(e,n,t),c.m(e,t),o(e,l,t)},p(e,[t]){e[0]?s?s.p(e,t):(s=te(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),r===(r=a(e))&&c?c.p(e,t):(c.d(1),c=r(e),c&&(c.c(),c.m(l.parentNode,l)))},i:e,o:e,d(e){s&&s.d(e),e&&i(n),c.d(e),e&&i(l)}}}function oe(e,t,n){let{hasLabel:l=!1}=t,{type:s}=t,{name:a}=t,{label:r}=t,{placeholder:o}=t,{onChange:i}=t,{onKeyUp:c}=t,{value:d=""}=t,{width_class:u}=t,{label_class:f="dark"}=t,{classes:p}=t,{data_field:m}=t,{options:g}=t;return e.$$set=e=>{"hasLabel"in e&&n(0,l=e.hasLabel),"type"in e&&n(1,s=e.type),"name"in e&&n(2,a=e.name),"label"in e&&n(3,r=e.label),"placeholder"in e&&n(4,o=e.placeholder),"onChange"in e&&n(5,i=e.onChange),"onKeyUp"in e&&n(6,c=e.onKeyUp),"value"in e&&n(7,d=e.value),"width_class"in e&&n(8,u=e.width_class),"label_class"in e&&n(9,f=e.label_class),"classes"in e&&n(10,p=e.classes),"data_field"in e&&n(11,m=e.data_field),"options"in e&&n(12,g=e.options)},[l,s,a,r,o,i,c,d,u,f,p,m,g]}class ie extends B{constructor(e){super(),M(this,e,oe,re,a,{hasLabel:0,type:1,name:2,label:3,placeholder:4,onChange:5,onKeyUp:6,value:7,width_class:8,label_class:9,classes:10,data_field:11,options:12})}}function ce(t){let n,l,s,a,c,u,p,m,h,_,b,$,k,y,v,x;return b=new V({props:{onClick:t[1],label:"Login",type:"secondary"}}),{c(){n=d("header"),n.innerHTML='<span class="app-name flex align-center text-bold text-primary svelte-pbnz77"><img class="logo svelte-pbnz77" src="./logo.svg" alt="oneList"/></span>',l=f(),s=d("div"),a=d("div"),c=d("h1"),c.textContent="Manage your task better with",u=f(),p=d("h1"),p.textContent="onelist",m=f(),h=d("br"),_=f(),H(b.$$.fragment),$=f(),k=d("div"),k.innerHTML='<img class="home svelte-pbnz77" src="./login.svg" alt="oneList"/>',y=f(),v=d("footer"),v.innerHTML='<span class="dev-name text-bold highlight text-underline svelte-pbnz77">Suban Khoja</span>',g(n,"class","app-header flex justify-space-between align-center svelte-pbnz77"),g(c,"class","tagline svelte-pbnz77"),g(p,"class","tagline highlight text-underline svelte-pbnz77"),g(a,"class","flex justify-center flex-column align-center tagline-container"),g(k,"class","flex justify-center flex-column align-center tagline-container"),g(s,"class","flex justify-center flex-row align-center grow"),g(v,"class","app-footer flex justify-end align-center bg-transparent svelte-pbnz77")},m(e,t){o(e,n,t),o(e,l,t),o(e,s,t),r(s,a),r(a,c),r(a,u),r(a,p),r(a,m),r(a,h),r(a,_),R(b,a,null),r(s,$),r(s,k),o(e,y,t),o(e,v,t),x=!0},p:e,i(e){x||(C(b.$$.fragment,e),x=!0)},o(e){L(b.$$.fragment,e),x=!1},d(e){e&&i(n),e&&i(l),e&&i(s),U(b),e&&i(y),e&&i(v)}}}function de(t){let n,l,s,a,c,u,p,m,h,_,b,$,k,y,v,x,w,E,N,S,T,I,P,O,j;return _=new ie({props:{name:"email",type:"email",label:"Email",hasLabel:!0,onChange:t[3]}}),y=new ie({props:{name:"password",type:"password",label:"Password",hasLabel:!0,onChange:t[3]}}),E=new V({props:{onClick:t[4],label:"Login",type:"primary"}}),O=new V({props:{onClick:t[2],label:"Return to home",type:"link"}}),{c(){n=d("div"),l=d("div"),s=d("div"),s.innerHTML='<img class="form svelte-pbnz77" src="./login-form.svg" alt="oneList"/>',a=f(),c=d("div"),u=d("span"),u.innerHTML='<img class="logo svelte-pbnz77" src="./logo.svg" alt="oneList"/>',p=f(),m=d("br"),h=f(),H(_.$$.fragment),b=f(),$=d("br"),k=f(),H(y.$$.fragment),v=f(),x=d("br"),w=f(),H(E.$$.fragment),N=f(),S=d("br"),T=f(),I=d("br"),P=f(),H(O.$$.fragment),g(s,"class","form flex justify-center bg-dark svelte-pbnz77"),g(u,"class","app-name flex align-center justify-center text-bold text-primary svelte-pbnz77"),g(c,"class","form form-right flex justify-center flex-column bg-white svelte-pbnz77"),g(l,"class","sub-container flex justify-center flex-row bg-white svelte-pbnz77"),g(n,"class","form-container flex justify-center flex-row align-center login-form svelte-pbnz77")},m(e,t){o(e,n,t),r(n,l),r(l,s),r(l,a),r(l,c),r(c,u),r(c,p),r(c,m),r(c,h),R(_,c,null),r(c,b),r(c,$),r(c,k),R(y,c,null),r(c,v),r(c,x),r(c,w),R(E,c,null),r(c,N),r(c,S),r(c,T),r(c,I),r(c,P),R(O,c,null),j=!0},p:e,i(e){j||(C(_.$$.fragment,e),C(y.$$.fragment,e),C(E.$$.fragment,e),C(O.$$.fragment,e),j=!0)},o(e){L(_.$$.fragment,e),L(y.$$.fragment,e),L(E.$$.fragment,e),L(O.$$.fragment,e),j=!1},d(e){e&&i(n),U(_),U(y),U(E),U(O)}}}function ue(e){let t,n,l,s;const a=[de,ce],r=[];function c(e,t){return e[0]?0:1}return n=c(e),l=r[n]=a[n](e),{c(){t=d("div"),l.c(),g(t,"class","flex flex-column container bg-white svelte-pbnz77")},m(e,l){o(e,t,l),r[n].m(t,null),s=!0},p(e,[s]){let o=n;n=c(e),n===o?r[n].p(e,s):(D(),L(r[o],1,1,(()=>{r[o]=null})),A(),l=r[n],l?l.p(e,s):(l=r[n]=a[n](e),l.c()),C(l,1),l.m(t,null))},i(e){s||(C(l),s=!0)},o(e){L(l),s=!1},d(e){e&&i(t),r[n].d()}}}function fe(e,t,n){let l={email:"",name:""},s=!1;return[s,()=>{n(0,s=!0)},()=>{n(0,s=!1)},e=>{l[e.target.name]=e.target.value},()=>{const e=l.email,t=l.password;e&&t&&(G(X.SHOW_SPINNER,{}),((e,t)=>firebase.auth().signInWithEmailAndPassword(e,t))(e,t).then((e=>{G(X.HIDE_SPINNER,{})})).catch((e=>{G(X.HIDE_SPINNER,{})})))}]}class pe extends B{constructor(e){super(),M(this,e,fe,ue,a,{})}}const me={BASE_ENDPOINT:"https://onelist-001-developer-edition.ap27.force.com/services/apexrest/api/v2/",ENDPOINTS:{getUserTasks:"getUserTasks",updateTask:"updateTask",createTask:"createTask",deleteTask:"deleteTask"}},ge=["Not Started","In Progress","Completed"],he=[{label:"Name",key:"task_name",show_in_list:!0,show_in_detail:!0,show_header:!1,allow_inline_edit:!1,field_type:"text"},{label:"Start Date",key:"task_start_date",show_in_list:!0,show_in_detail:!1,show_header:!0,allow_inline_edit:!0,field_type:"date"},{label:"End Date",key:"task_end_date",show_in_list:!0,show_in_detail:!1,show_header:!0,allow_inline_edit:!0,field_type:"date"},{label:"Status",key:"task_status",show_in_list:!0,show_in_detail:!1,show_header:!0,allow_inline_edit:!0,field_type:"select"},{label:"Notes",key:"task_note",show_in_list:!1,show_in_detail:!0,show_header:!1,allow_inline_edit:!1,field_type:"text-long"}],_e=e=>e?e.replace(" ","-"):"";Object.freeze(me),Object.freeze(ge),Object.freeze(he);const be=(e,t,n,l)=>fetch(me.BASE_ENDPOINT+me.ENDPOINTS.updateTask,{method:"POST",body:JSON.stringify({user_id:e,node_id:t,content:n,note:l})}).then((e=>e.json())).catch((e=>{console.error("updateTask : ",e)}));function $e(e,t,n){const l=e.slice();return l[5]=t[n],l}function ke(e){let t,n,l,s,a,c,p,m,_,b,$=e[0][e[5].key]+"";return c=new V({props:{onClick:e[3],label:"Edit",type:"link"}}),_=new V({props:{onClick:e[4],label:"Delete",type:"link"}}),{c(){t=d("span"),n=u($),l=f(),s=d("span"),a=d("span"),H(c.$$.fragment),p=f(),m=d("span"),H(_.$$.fragment),g(a,"class","action svelte-133c0hq"),g(m,"class","action svelte-133c0hq"),g(s,"class","row-actions svelte-133c0hq")},m(e,i){o(e,t,i),r(t,n),o(e,l,i),o(e,s,i),r(s,a),R(c,a,null),r(s,p),r(s,m),R(_,m,null),b=!0},p(e,t){(!b||1&t)&&$!==($=e[0][e[5].key]+"")&&h(n,$)},i(e){b||(C(c.$$.fragment,e),C(_.$$.fragment,e),b=!0)},o(e){L(c.$$.fragment,e),L(_.$$.fragment,e),b=!1},d(e){e&&i(t),e&&i(l),e&&i(s),U(c),U(_)}}}function ye(e){let t,n,l,s;const a=[xe,ve],r=[];return t=function(e,t){return"select"!==e[5].field_type?0:1}(e),n=r[t]=a[t](e),{c(){n.c(),l=p()},m(e,n){r[t].m(e,n),o(e,l,n),s=!0},p(e,t){n.p(e,t)},i(e){s||(C(n),s=!0)},o(e){L(n),s=!1},d(e){r[t].d(e),e&&i(l)}}}function ve(e){let t,n;return t=new ie({props:{type:e[5].field_type,classes:_e(e[1][e[5].key]),value:e[1][e[5].key],onChange:e[2],data_field:e[5].key,options:ge}}),{c(){H(t.$$.fragment)},m(e,l){R(t,e,l),n=!0},p(e,n){const l={};2&n&&(l.classes=_e(e[1][e[5].key])),2&n&&(l.value=e[1][e[5].key]),t.$set(l)},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function xe(e){let t,n;return t=new ie({props:{type:e[5].field_type,classes:"bg-transparent",value:e[0][e[5].key],onChange:e[2],data_field:e[5].key}}),{c(){H(t.$$.fragment)},m(e,l){R(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.value=e[0][e[5].key]),t.$set(l)},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function we(e){let t,n,l=e[5].show_in_list&&function(e){let t,n,l,s,a,c;const u=[ye,ke],p=[];return n=function(e,t){return e[5].allow_inline_edit?0:1}(e),l=p[n]=u[n](e),{c(){t=d("span"),l.c(),s=f(),g(t,"class",a="column flex justify-center border-box text-bold pointer "+e[5].key+" "+("task_name"==e[5].key?"justify-start":"justify-center")+" "+("select"==e[5].field_type?"align-stretch":"align-center")+" svelte-133c0hq")},m(e,l){o(e,t,l),p[n].m(t,null),r(t,s),c=!0},p(e,t){l.p(e,t)},i(e){c||(C(l),c=!0)},o(e){L(l),c=!1},d(e){e&&i(t),p[n].d()}}}(e);return{c(){l&&l.c(),t=p()},m(e,s){l&&l.m(e,s),o(e,t,s),n=!0},p(e,t){e[5].show_in_list&&l.p(e,t)},i(e){n||(C(l),n=!0)},o(e){L(l),n=!1},d(e){l&&l.d(e),e&&i(t)}}}function Ee(e){let t,n,l=he,s=[];for(let t=0;t<l.length;t+=1)s[t]=we($e(e,l,t));const a=e=>L(s[e],1,1,(()=>{s[e]=null}));return{c(){t=d("li");for(let e=0;e<s.length;e+=1)s[e].c();g(t,"class","columns text-primary flex justify-space-between align-center border-box svelte-133c0hq")},m(e,l){o(e,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,[n]){if(31&n){let r;for(l=he,r=0;r<l.length;r+=1){const a=$e(e,l,r);s[r]?(s[r].p(a,n),C(s[r],1)):(s[r]=we(a),s[r].c(),C(s[r],1),s[r].m(t,null))}for(D(),r=l.length;r<s.length;r+=1)a(r);A()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)C(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)L(s[e]);n=!1},d(e){e&&i(t),c(s,e)}}}function Ne(e,t,n){let{task:l}=t,s={...l};return e.$$set=e=>{"task"in e&&n(0,l=e.task)},[l,s,e=>{n(1,s[e.target.dataset.field]=e.target.value,s),G(X.UPDATE_TASK,s)},()=>{G(X.OPEN_TASK_DETAIL,l.task_id)},()=>{G(X.DELETE_TASK,l.task_id)}]}class Se extends B{constructor(e){super(),M(this,e,Ne,Ee,a,{task:0})}}function Te(e,t,n){const l=e.slice();return l[11]=t[n],l}function Ie(e,t,n){const l=e.slice();return l[14]=t[n],l}function Pe(e,t,n){const l=e.slice();return l[11]=t[n],l}function Oe(e){let t,n,l,s,a=he,u=[];for(let t=0;t<a.length;t+=1)u[t]=je(Pe(e,a,t));let p=e[0],m=[];for(let t=0;t<p.length;t+=1)m[t]=ze(Ie(e,p,t));const h=e=>L(m[e],1,1,(()=>{m[e]=null}));return{c(){t=d("div"),n=d("li");for(let e=0;e<u.length;e+=1)u[e].c();l=f();for(let e=0;e<m.length;e+=1)m[e].c();g(n,"class","columns flex justify-space-between align-center text-white text-bold svelte-zcm1k2"),g(t,"class","task-container flex justify-start align-center grow flex-column svelte-zcm1k2")},m(e,a){o(e,t,a),r(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);r(t,l);for(let e=0;e<m.length;e+=1)m[e].m(t,null);s=!0},p(e,l){if(0&l){let t;for(a=he,t=0;t<a.length;t+=1){const s=Pe(e,a,t);u[t]?u[t].p(s,l):(u[t]=je(s),u[t].c(),u[t].m(n,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=a.length}if(1&l){let n;for(p=e[0],n=0;n<p.length;n+=1){const s=Ie(e,p,n);m[n]?(m[n].p(s,l),C(m[n],1)):(m[n]=ze(s),m[n].c(),C(m[n],1),m[n].m(t,null))}for(D(),n=p.length;n<m.length;n+=1)h(n);A()}},i(e){if(!s){for(let e=0;e<p.length;e+=1)C(m[e]);s=!0}},o(e){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)L(m[e]);s=!1},d(e){e&&i(t),c(u,e),c(m,e)}}}function je(t){let n,l=t[11].show_in_list&&function(t){let n,l,s,a=(t[11].show_header?t[11].label:"")+"";return{c(){n=d("span"),l=u(a),g(n,"class",s="column flex justify-center grow border-box text-bold "+t[11].key+" "+(t[11].show_header?"bg-primary":"")+" svelte-zcm1k2")},m(e,t){o(e,n,t),r(n,l)},p:e,d(e){e&&i(n)}}}(t);return{c(){l&&l.c(),n=p()},m(e,t){l&&l.m(e,t),o(e,n,t)},p(e,t){e[11].show_in_list&&l.p(e,t)},d(e){l&&l.d(e),e&&i(n)}}}function ze(e){let t,n;return t=new Se({props:{task:e[14]}}),{c(){H(t.$$.fragment)},m(e,l){R(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.task=e[14]),t.$set(l)},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function De(e){let t,n,l,s,a,p,_,b,$,k,y,v,x,w,E,N,S,T=e[2].task_name+"",I=he,P=[];for(let t=0;t<I.length;t+=1)P[t]=Ae(Te(e,I,t));const O=e=>L(P[e],1,1,(()=>{P[e]=null}));return y=new V({props:{onClick:e[7],label:"Save",type:"secondary"}}),x=new V({props:{onClick:e[6],label:"Close",type:"primary"}}),{c(){t=d("div"),n=f(),l=d("div"),s=d("div"),a=d("div"),p=d("div"),_=d("span"),b=u(T),$=f();for(let e=0;e<P.length;e+=1)P[e].c();k=f(),H(y.$$.fragment),v=f(),H(x.$$.fragment),g(t,"class","bg-drop fixed outsider bg-transparent svelte-zcm1k2"),g(_,"class","header text-bold text-primary svelte-zcm1k2"),g(p,"class","modal-header flex justify-space-between text-primary"),g(a,"class","modal-content relative"),g(s,"class","modal bg-white absolute border-primary svelte-zcm1k2"),g(l,"class",w="fixed side-popup "+(e[2]?"side-popup-show":"")+" svelte-zcm1k2")},m(i,c){o(i,t,c),o(i,n,c),o(i,l,c),r(l,s),r(s,a),r(a,p),r(p,_),r(_,b),r(a,$);for(let e=0;e<P.length;e+=1)P[e].m(a,null);r(a,k),R(y,a,null),r(a,v),R(x,a,null),E=!0,N||(S=m(t,"click",e[6]),N=!0)},p(e,t){if((!E||4&t)&&T!==(T=e[2].task_name+"")&&h(b,T),20&t){let n;for(I=he,n=0;n<I.length;n+=1){const l=Te(e,I,n);P[n]?(P[n].p(l,t),C(P[n],1)):(P[n]=Ae(l),P[n].c(),C(P[n],1),P[n].m(a,k))}for(D(),n=I.length;n<P.length;n+=1)O(n);A()}(!E||4&t&&w!==(w="fixed side-popup "+(e[2]?"side-popup-show":"")+" svelte-zcm1k2"))&&g(l,"class",w)},i(e){if(!E){for(let e=0;e<I.length;e+=1)C(P[e]);C(y.$$.fragment,e),C(x.$$.fragment,e),E=!0}},o(e){P=P.filter(Boolean);for(let e=0;e<P.length;e+=1)L(P[e]);L(y.$$.fragment,e),L(x.$$.fragment,e),E=!1},d(e){e&&i(t),e&&i(n),e&&i(l),c(P,e),U(y),U(x),N=!1,S()}}}function Ae(e){let t,n,l=e[11].show_in_detail&&function(e){let t,n,l,s,a,r;return l=new ie({props:{width_class:"width-full",hasLabel:!0,label:e[11].label,type:e[11].field_type,onChange:e[4],value:e[2][e[11].key],data_field:e[11].key}}),{c(){t=d("br"),n=f(),H(l.$$.fragment),s=f(),a=d("br")},m(e,i){o(e,t,i),o(e,n,i),R(l,e,i),o(e,s,i),o(e,a,i),r=!0},p(e,t){const n={};4&t&&(n.value=e[2][e[11].key]),l.$set(n)},i(e){r||(C(l.$$.fragment,e),r=!0)},o(e){L(l.$$.fragment,e),r=!1},d(e){e&&i(t),e&&i(n),U(l,e),e&&i(s),e&&i(a)}}}(e);return{c(){l&&l.c(),t=p()},m(e,s){l&&l.m(e,s),o(e,t,s),n=!0},p(e,t){e[11].show_in_detail&&l.p(e,t)},i(e){n||(C(l),n=!0)},o(e){L(l),n=!1},d(e){l&&l.d(e),e&&i(t)}}}function Ce(e){let t,n,l,s,a,c,u,m,h,_,b,$,k;c=new ie({props:{width_class:"width-half",name:"search",type:"text",placeholder:"Type your task here. Press enter to create",onChange:e[3],onKeyUp:e[5],value:e[1]}}),h=new V({props:{onClick:W,label:"Sign out",type:"link"}});let y=e[0]&&e[0].length&&Oe(e),v=e[2]&&De(e);return{c(){t=d("div"),n=d("header"),l=d("div"),l.innerHTML='<img class="logo svelte-zcm1k2" src="./logo.svg" alt="onelist"/>',s=f(),a=d("div"),H(c.$$.fragment),u=f(),m=d("div"),H(h.$$.fragment),_=f(),y&&y.c(),b=f(),v&&v.c(),$=p(),g(l,"class","logo-container text-center svelte-zcm1k2"),g(a,"class","input-container flex justify-center svelte-zcm1k2"),g(m,"class","action-container text-center svelte-zcm1k2"),g(n,"class","flex border-box align-center justify-center svelte-zcm1k2"),g(t,"class","app-container flex align-center flex-column svelte-zcm1k2")},m(e,i){o(e,t,i),r(t,n),r(n,l),r(n,s),r(n,a),R(c,a,null),r(n,u),r(n,m),R(h,m,null),r(t,_),y&&y.m(t,null),o(e,b,i),v&&v.m(e,i),o(e,$,i),k=!0},p(e,[n]){const l={};2&n&&(l.value=e[1]),c.$set(l),e[0]&&e[0].length?y?(y.p(e,n),1&n&&C(y,1)):(y=Oe(e),y.c(),C(y,1),y.m(t,null)):y&&(D(),L(y,1,1,(()=>{y=null})),A()),e[2]?v?(v.p(e,n),4&n&&C(v,1)):(v=De(e),v.c(),C(v,1),v.m($.parentNode,$)):v&&(D(),L(v,1,1,(()=>{v=null})),A())},i(e){k||(C(c.$$.fragment,e),C(h.$$.fragment,e),C(y),C(v),k=!0)},o(e){L(c.$$.fragment,e),L(h.$$.fragment,e),L(y),L(v),k=!1},d(e){e&&i(t),U(c),U(h),y&&y.d(),e&&i(b),v&&v.d(e),e&&i($)}}}function Le(e,t,n){let l,s,a=[];k((()=>{var e;Y(X.UPDATE_TASK,o),Y(X.DELETE_TASK,r),Y(X.OPEN_TASK_DETAIL,i),Y(X.CLOSE_POPUP,c),G(X.SHOW_SPINNER,{}),(e=q.currentUser.uid,fetch(me.BASE_ENDPOINT+me.ENDPOINTS.getUserTasks,{method:"POST",body:JSON.stringify({user_id:e})}).then((e=>e.json())).catch((e=>{console.error("getUserTasks : ",e)}))).then((e=>{if(e&&e.nodes&&e.nodes.length){n(0,a=e.nodes);for(let e=0;e<a.length;e++)if(a[e].note){const t=JSON.parse(a[e].note);n(0,a[e].task_start_date=t.task_start_date,a),n(0,a[e].task_end_date=t.task_end_date,a),n(0,a[e].task_note=t.task_note,a),n(0,a[e].task_status=t.task_status,a),n(0,a[e].task_name=a[e].content,a),n(0,a[e].task_id=a[e].id,a),delete a[e].note,delete a[e].checked,delete a[e].content,delete a[e].id}G(X.HIDE_SPINNER,{})}else G(X.HIDE_SPINNER,{})})).catch((e=>{G(X.HIDE_SPINNER,{})}))}));const r=e=>{var t,l;t=q.currentUser.uid,l=e,fetch(me.BASE_ENDPOINT+me.ENDPOINTS.deleteTask,{method:"POST",body:JSON.stringify({user_id:t,node_id:l})}).then((e=>e.json())).catch((e=>{console.error("deleteTask : ",e)})),n(0,a=a.filter((t=>t.task_id!==e)))},o=e=>{const t={task_start_date:e.task_start_date?e.task_start_date:"",task_end_date:e.task_end_date?e.task_end_date:"",task_note:e.task_note?e.task_note:"",task_status:e.task_status?e.task_status:""};be(q.currentUser.uid,e.task_id,e.task_name,JSON.stringify(t))},i=e=>{n(2,s=a.filter((t=>t.task_id===e))[0])},c=()=>{n(2,s=null)};return[a,l,s,e=>{n(1,l=e.target.value)},e=>{n(2,s[e.target.dataset.field]=e.target.value,s)},e=>{var t,s,r;"Enter"===e.key&&l&&(G(X.SHOW_SPINNER,{}),(t=q.currentUser.uid,s=l,r=JSON.stringify({task_start_date:"",task_end_date:"",task_note:"",task_status:"Not Started"}),fetch(me.BASE_ENDPOINT+me.ENDPOINTS.createTask,{method:"POST",body:JSON.stringify({user_id:t,content:s,note:r})}).then((e=>e.json())).catch((e=>{console.error("createTask : ",e)}))).then((e=>{a.push({task_id:e.new_node_ids[0],task_name:l,task_start_date:"",task_end_date:"",task_note:"",task_status:"Not Started"}),n(1,l=""),n(0,a),G(X.HIDE_SPINNER,{})})).catch((e=>{G(X.HIDE_SPINNER,{})})))},c,()=>{G(X.SHOW_SPINNER,{});const e={task_start_date:s.task_start_date?s.task_start_date:"",task_end_date:s.task_end_date?s.task_end_date:"",task_note:s.task_note?s.task_note:"",task_status:s.task_status?s.task_status:""};be(q.currentUser.uid,s.task_id,s.task_name,JSON.stringify(e)).then((e=>{G(X.HIDE_SPINNER,{})})).catch((e=>{G(X.HIDE_SPINNER,{})}))}]}class He extends B{constructor(e){super(),M(this,e,Le,Ce,a,{})}}function Re(e){let t;return{c(){t=d("div"),t.innerHTML='<div class="flex align-center text-primary"><img class="logo svelte-yd4ypy" src="./logo.svg" alt="oneList"/></div>',g(t,"class","main-container flex align-center flex-column justify-center bg-transparent svelte-yd4ypy")},m(e,n){o(e,t,n)},d(e){e&&i(t)}}}function Ue(t){let n,l=t[0]&&Re();return{c(){l&&l.c(),n=p()},m(e,t){l&&l.m(e,t),o(e,n,t)},p(e,[t]){e[0]?l||(l=Re(),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&i(n)}}}function Ke(e,t,n){let{show:l}=t;return e.$$set=e=>{"show"in e&&n(0,l=e.show)},[l]}class Me extends B{constructor(e){super(),M(this,e,Ke,Ue,a,{show:0})}}function Be(e){let t;return{c(){t=d("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(241, 242, 243 / 0%); display: block;" width="100px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" r="16" stroke-width="4" stroke="#39414d" stroke-dasharray="50.26548245743669 50.26548245743669" fill="none" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform></circle></svg>',g(t,"class","spinner-container flex justify-center align-center fixed flex-column svelte-y0jlys")},m(e,n){o(e,t,n)},d(e){e&&i(t)}}}function Je(t){let n,l=t[0]&&Be();return{c(){l&&l.c(),n=p()},m(e,t){l&&l.m(e,t),o(e,n,t)},p(e,[t]){e[0]?l||(l=Be(),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&i(n)}}}function We(e,t,n){let{show:l=!0}=t;return e.$$set=e=>{"show"in e&&n(0,l=e.show)},[l]}class qe extends B{constructor(e){super(),M(this,e,We,Je,a,{show:0})}}function Fe(e){let t,n,l,s;const a=[Ye,Xe],r=[];function c(e,t){return e[0]?0:1}return t=c(e),n=r[t]=a[t](e),{c(){n.c(),l=p()},m(e,n){r[t].m(e,n),o(e,l,n),s=!0},p(e,s){let o=t;t=c(e),t!==o&&(D(),L(r[o],1,1,(()=>{r[o]=null})),A(),n=r[t],n||(n=r[t]=a[t](e),n.c()),C(n,1),n.m(l.parentNode,l))},i(e){s||(C(n),s=!0)},o(e){L(n),s=!1},d(e){r[t].d(e),e&&i(l)}}}function Xe(e){let t,n;return t=new pe({}),{c(){H(t.$$.fragment)},m(e,l){R(t,e,l),n=!0},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ye(e){let t,n;return t=new He({}),{c(){H(t.$$.fragment)},m(e,l){R(t,e,l),n=!0},i(e){n||(C(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ge(e){let t,n,l,s,a,c;n=new qe({props:{show:e[1]}}),s=new Me({props:{show:e[2]}});let u=!e[2]&&Fe(e);return{c(){t=d("main"),H(n.$$.fragment),l=f(),H(s.$$.fragment),a=f(),u&&u.c()},m(e,i){o(e,t,i),R(n,t,null),r(t,l),R(s,t,null),r(t,a),u&&u.m(t,null),c=!0},p(e,[l]){const a={};2&l&&(a.show=e[1]),n.$set(a);const r={};4&l&&(r.show=e[2]),s.$set(r),e[2]?u&&(D(),L(u,1,1,(()=>{u=null})),A()):u?(u.p(e,l),4&l&&C(u,1)):(u=Fe(e),u.c(),C(u,1),u.m(t,null))},i(e){c||(C(n.$$.fragment,e),C(s.$$.fragment,e),C(u),c=!0)},o(e){L(n.$$.fragment,e),L(s.$$.fragment,e),L(u),c=!1},d(e){e&&i(t),U(n),U(s),u&&u.d()}}}function Ze(e,t,n){let l,s=!1,a=!0;const r=()=>{n(1,s=!0),n(1,s)},o=()=>{n(1,s=!1),n(1,s)};return q.onAuthStateChanged((e=>{e&&e.uid?n(0,l=e):n(0,l=null),setTimeout((()=>{n(2,a=!1)}),500)})),k((()=>{Y(X.SHOW_SPINNER,r),Y(X.HIDE_SPINNER,o)})),[l,s,a]}return new class extends B{constructor(e){super(),M(this,e,Ze,Ge,a,{})}}({target:document.body})}();
